{"remainingRequest":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\LibraryManagement\\library-management\\library\\library\\vue\\src\\views\\BookWithUser.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\src\\views\\BookWithUser.vue","mtime":1719294664118},{"path":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\babel.config.js","mtime":1719294648379},{"path":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719294651176},{"path":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1719294650893},{"path":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719294651176},{"path":"D:\\LibraryManagement\\library-management\\library\\library\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1719294662908}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMKaW1wb3J0IHJlcXVlc3QgZnJvbSAiLi4vdXRpbHMvcmVxdWVzdCI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgdXNlclN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSB8fCAie30iOwogICAgdGhpcy51c2VyID0gSlNPTi5wYXJzZSh1c2VyU3RyKTsKICAgIHRoaXMubG9hZCgpOwogIH0sCiAgbmFtZTogJ2Jvb2t3aXRodXNlcicsCiAgbWV0aG9kczogewogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuZm9ybXMgPSB2YWw7CiAgICB9LAogICAgZGVsZXRlQmF0Y2g6IGZ1bmN0aW9uIGRlbGV0ZUJhdGNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmZvcm1zLmxlbmd0aCkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCLor7fpgInmi6nmlbDmja7vvIEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gIOS4gOS4quWwj+S8mOWMlu+8jOebtOaOpeWPkemAgei/meS4quaVsOe7hO+8jOiAjOS4jeaYr+S4gOS4quS4gOS4queahOaPkOS6pOWIoOmZpAoKCiAgICAgIHJlcXVlc3QucG9zdCgiYm9va3dpdGh1c2VyL2RlbGV0ZVJlY29yZHMiLCB0aGlzLmZvcm1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcyMDAnKSB7CiAgICAgICAgICBFbE1lc3NhZ2Uuc3VjY2Vzcygi5om56YeP5Yig6Zmk5oiQ5YqfIik7CgogICAgICAgICAgX3RoaXMubG9hZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnVzZXIucm9sZSA9PSAxKSB7CiAgICAgICAgcmVxdWVzdC5nZXQoIi9ib29rd2l0aHVzZXIiLCB7CiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgcGFnZU51bTogdGhpcy5jdXJyZW50UGFnZSwKICAgICAgICAgICAgcGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgICAgIHNlYXJjaDE6IHRoaXMuc2VhcmNoMSwKICAgICAgICAgICAgc2VhcmNoMjogdGhpcy5zZWFyY2gyLAogICAgICAgICAgICBzZWFyY2gzOiB0aGlzLnNlYXJjaDMKICAgICAgICAgIH0KICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBfdGhpczIudGFibGVEYXRhID0gcmVzLmRhdGEucmVjb3JkczsKICAgICAgICAgIF90aGlzMi50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3QuZ2V0KCIvYm9va3dpdGh1c2VyIiwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgICBzZWFyY2gxOiB0aGlzLnNlYXJjaDEsCiAgICAgICAgICAgIHNlYXJjaDI6IHRoaXMuc2VhcmNoMiwKICAgICAgICAgICAgc2VhcmNoMzogdGhpcy51c2VyLmlkCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgX3RoaXMyLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgICBfdGhpczIudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5zZWFyY2gxID0gIiI7CiAgICAgIHRoaXMuc2VhcmNoMiA9ICIiOwogICAgICB0aGlzLnNlYXJjaDMgPSAiIjsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGZvcm0zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb3cpKTsKICAgICAgcmVxdWVzdC5wb3N0KCJib29rd2l0aHVzZXIvZGVsZXRlUmVjb3JkIiwgZm9ybTMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuY29kZSA9PSAnMjAwJykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgIH0gZWxzZSBFbE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CgogICAgICAgIF90aGlzMy5sb2FkKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZXJlUHJvbG9uZzogZnVuY3Rpb24gaGFuZGxlcmVQcm9sb25nKHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBub3dEYXRlID0gbmV3IERhdGUocm93LmRlYWR0aW1lKTsKICAgICAgbm93RGF0ZS5zZXREYXRlKG5vd0RhdGUuZ2V0RGF0ZSgpICsgMzApOwogICAgICByb3cuZGVhZHRpbWUgPSBtb21lbnQobm93RGF0ZSkuZm9ybWF0KCJ5eXl5LU1NLUREIEhIOm1tOnNzIik7CiAgICAgIHJvdy5wcm9sb25nID0gcm93LnByb2xvbmcgLSAxOwogICAgICByZXF1ZXN0LnBvc3QoIi9ib29rd2l0aHVzZXIiLCByb3cpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuY29kZSA9PSAnMjAwJykgewogICAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+e7reWAn+aIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CgogICAgICAgIF90aGlzNC5sb2FkKCk7CgogICAgICAgIF90aGlzNC5kaWFsb2dWaXNpYmxlMiA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIC8vRVM26K+t5rOVCiAgICAgIC8v5Zyw5Z2ALOS9huaYr++8n0lQ5LiO56uv5Y+j77yfK+ivt+axguWPguaVsAogICAgICAvLyB0aGlzLmZvcm0/6L+Z5piv6Ieq5Yqo5L+d5a2Y5ZyoZm9ybeS4reeahO+8jOiZveeEtuaYvuekuuaXtuayoeacieS9v+eUqO+8jOS9huaYr+i/meS4quWvueixoeS4reaYr+acieWug+eahAogICAgICByZXF1ZXN0LnBvc3QoIi9ib29rd2l0aHVzZXIiLCB0aGlzLmZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuY29kZSA9PSAnMjAwJykgewogICAgICAgICAgRWxNZXNzYWdlKHsKICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueS/oeaBr+aIkOWKnycsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEVsTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9CgogICAgICAgIF90aGlzNS5sb2FkKCk7CgogICAgICAgIF90aGlzNS5kaWFsb2dWaXNpYmxlMiA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVFZGl0OiBmdW5jdGlvbiBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvdykpOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUyID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgIHRoaXMubG9hZCgpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICBmb3JtMjoge30sCiAgICAgIGZvcm0zOiB7fSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRpYWxvZ1Zpc2libGUyOiBmYWxzZSwKICAgICAgc2VhcmNoMTogJycsCiAgICAgIHNlYXJjaDI6ICcnLAogICAgICBzZWFyY2gzOiAnJywKICAgICAgdG90YWw6IDEwLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICB1c2VyOiB7fSwKICAgICAgZm9ybXM6IFtdCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["D:\\LibraryManagement\\library-management\\library\\library\\vue\\src\\views\\BookWithUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"home\" style =\"padding: 10px\">\r\n    <!-- 搜索-->\r\n    <div style=\"margin: 10px 0;\">\r\n\r\n      <el-form inline=\"true\" size=\"small\" >\r\n        <el-form-item label=\"图书编号\" >\r\n          <el-input v-model=\"search1\" placeholder=\"请输入图书编号\"  clearable>\r\n            <template #prefix><el-icon class=\"el-input__icon\"><search/></el-icon></template>\r\n          </el-input>\r\n        </el-form-item >\r\n        <el-form-item label=\"图书名称\" >\r\n          <el-input v-model=\"search2\" placeholder=\"请输入图书名称\"  clearable>\r\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\r\n          </el-input>\r\n        </el-form-item >\r\n        <el-form-item label=\"读者\" v-if=\"user.role == 1\">\r\n          <el-input v-model=\"search3\" placeholder=\"请输入读者ID\"  clearable>\r\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\r\n          </el-input>\r\n        </el-form-item >\r\n        <el-form-item>\r\n          <el-button type=\"primary\" style=\"margin-left: 1%\" @click=\"load\" size=\"mini\">查询</el-button>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button size=\"mini\"  type=\"danger\" @click=\"clear\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <!-- 按钮-->\r\n    <div style=\"margin: 10px 0;\" >\r\n      <el-popconfirm title=\"确认删除?\" @confirm=\"deleteBatch\" v-if=\"user.role == 1\">\r\n        <template #reference>\r\n          <el-button type=\"danger\" size=\"mini\" >批量删除</el-button>\r\n        </template>\r\n      </el-popconfirm>\r\n    </div>\r\n    <!-- 数据字段-->\r\n    <el-table :data=\"tableData\" stripe border=\"true\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column v-if=\"user.role ==1\"\r\n                       type=\"selection\"\r\n                       width=\"55\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"isbn\" label=\"图书编号\" sortable />\r\n      <el-table-column prop=\"bookName\" label=\"图书名称\" />\r\n      <el-table-column prop=\"nickName\" label=\"读者\" />\r\n      <el-table-column prop=\"lendtime\" label=\"借阅时间\" />\r\n      <el-table-column prop=\"deadtime\" label=\"最迟归还日期\" />\r\n      <el-table-column prop=\"prolong\" label=\"可续借次数\" />\r\n      <el-table-column fixed=\"right\" label=\"操作\" >\r\n        <template v-slot=\"scope\">\r\n          <el-button  size=\"mini\" @click =\"handleEdit(scope.row)\" v-if=\"user.role == 1\">修改</el-button>\r\n          <el-popconfirm title=\"确认删除?\" @confirm=\"handleDelete(scope.row) \" v-if=\"user.role == 1\">\r\n            <template #reference>\r\n              <el-button type=\"danger\" size=\"mini\" >删除</el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n          <el-popconfirm title=\"确认续借(续借一次延长30天)?\" @confirm=\"handlereProlong(scope.row)\" v-if=\"user.role == 2\" :disabled=\"scope.row.prolong == 0\">\r\n            <template #reference>\r\n              <el-button type=\"danger\" size=\"mini\" :disabled=\"scope.row.prolong == 0\" >续借</el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!--    分页-->\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n          v-model:currentPage=\"currentPage\"\r\n          :page-sizes=\"[5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n      >\r\n      </el-pagination>\r\n\r\n      <el-dialog v-model=\"dialogVisible2\" title=\"修改借阅信息\" width=\"30%\">\r\n        <el-form :model=\"form\" label-width=\"120px\">\r\n\r\n          <el-form-item label=\"图书编号\">\r\n            <el-input style=\"width: 80%\" v-model=\"form.isbn\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"图书名称\">\r\n            <el-input style=\"width: 80%\" v-model=\"form.bookName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"读者\">\r\n            <el-input style=\"width: 80%\" v-model=\"form.nickName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"续借次数\">\r\n            <el-input style=\"width: 80%\" v-model=\"form.prolong\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n        <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible2 = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\r\n      </span>\r\n        </template>\r\n      </el-dialog>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport request from \"../utils/request\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport moment from \"moment\";\r\nexport default {\r\n  created(){\r\n    let userStr = sessionStorage.getItem(\"user\") ||\"{}\"\r\n    this.user = JSON.parse(userStr)\r\n    this.load()\r\n  },\r\n  name: 'bookwithuser',\r\n  methods: {\r\n\r\n    handleSelectionChange(val){\r\n      this.forms = val\r\n    },\r\n    deleteBatch(){\r\n      if (!this.forms.length) {\r\n        ElMessage.warning(\"请选择数据！\")\r\n        return\r\n      }\r\n      //  一个小优化，直接发送这个数组，而不是一个一个的提交删除\r\n      request.post(\"bookwithuser/deleteRecords\",this.forms).then(res =>{\r\n        if(res.code === '200'){\r\n          ElMessage.success(\"批量删除成功\")\r\n          this.load()\r\n        }\r\n        else {\r\n          ElMessage.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    load(){\r\n      if(this.user.role == 1){\r\n        request.get(\"/bookwithuser\",{\r\n          params:{\r\n            pageNum: this.currentPage,\r\n            pageSize: this.pageSize,\r\n            search1: this.search1,\r\n            search2: this.search2,\r\n            search3: this.search3,\r\n          }\r\n        }).then(res =>{\r\n          console.log(res)\r\n          this.tableData = res.data.records\r\n\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n      else {\r\n        request.get(\"/bookwithuser\",{\r\n          params:{\r\n            pageNum: this.currentPage,\r\n            pageSize: this.pageSize,\r\n            search1: this.search1,\r\n            search2: this.search2,\r\n            search3: this.user.id,\r\n          }\r\n        }).then(res =>{\r\n          console.log(res)\r\n          this.tableData = res.data.records\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n    },\r\n    clear(){\r\n      this.search1 = \"\"\r\n      this.search2 = \"\"\r\n      this.search3 = \"\"\r\n      this.load()\r\n    },\r\n    handleDelete(row){\r\n      const form3 = JSON.parse(JSON.stringify(row))\r\n      request.post(\"bookwithuser/deleteRecord\",form3).then(res =>{\r\n        console.log(res)\r\n        if(res.code == '200' ){\r\n          ElMessage.success(\"删除成功\")\r\n        }\r\n        else\r\n          ElMessage.error(res.msg)\r\n        this.load()\r\n      })\r\n    },\r\n    handlereProlong(row){\r\n      var nowDate = new Date(row.deadtime);\r\n      nowDate.setDate(nowDate.getDate()+30);\r\n      row.deadtime = moment(nowDate).format(\"yyyy-MM-DD HH:mm:ss\");\r\n      row.prolong = row.prolong -1;\r\n      request.post(\"/bookwithuser\",row).then(res =>{\r\n        console.log(res)\r\n        if(res.code == '200'){\r\n          ElMessage({\r\n            message: '续借成功',\r\n            type: 'success',\r\n          })\r\n        }\r\n        else {\r\n          ElMessage.error(res.msg)\r\n        }\r\n        this.load()\r\n        this.dialogVisible2 = false\r\n      })\r\n    },\r\n    save(){\r\n      //ES6语法\r\n      //地址,但是？IP与端口？+请求参数\r\n      // this.form?这是自动保存在form中的，虽然显示时没有使用，但是这个对象中是有它的\r\n      request.post(\"/bookwithuser\",this.form).then(res =>{\r\n        console.log(res)\r\n        if(res.code == '200'){\r\n          ElMessage({\r\n            message: '修改信息成功',\r\n            type: 'success',\r\n          })\r\n        }\r\n        else {\r\n          ElMessage.error(res.msg)\r\n        }\r\n        this.load()\r\n        this.dialogVisible2 = false\r\n      })\r\n    },\r\n\r\n    handleEdit(row){\r\n      this.form = JSON.parse(JSON.stringify(row))\r\n      this.dialogVisible2 = true\r\n    },\r\n    handleSizeChange(pageSize){\r\n      this.pageSize = pageSize\r\n      this.load()\r\n    },\r\n    handleCurrentChange(pageNum){\r\n      this.pageNum = pageNum\r\n      this.load()\r\n    },\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      form: {},\r\n      form2:{},\r\n      form3:{},\r\n      dialogVisible: false,\r\n      dialogVisible2: false,\r\n      search1:'',\r\n      search2:'',\r\n      search3:'',\r\n      total:10,\r\n      currentPage:1,\r\n      pageSize: 10,\r\n      tableData: [],\r\n      user:{},\r\n      forms:[],\r\n    }\r\n  },\r\n}\r\n</script>\r\n"],"sourceRoot":""}]}