{"remainingRequest":"D:\\Libr\\library\\library\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\Libr\\library\\library\\vue\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\Libr\\library\\library\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\Libr\\library\\library\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\Libr\\library\\library\\vue\\src\\views\\Chat.vue?vue&type=template&id=15964adc&scoped=true","dependencies":[{"path":"D:\\Libr\\library\\library\\vue\\src\\views\\Chat.vue","mtime":1719407245746},{"path":"D:\\Libr\\library\\library\\vue\\babel.config.js","mtime":1719454509629},{"path":"D:\\Libr\\library\\library\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719454511256},{"path":"D:\\Libr\\library\\library\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1719454511098},{"path":"D:\\Libr\\library\\library\\vue\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1719454517986},{"path":"D:\\Libr\\library\\library\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1719454511256},{"path":"D:\\Libr\\library\\library\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1719454517982}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVuZGVyTGlzdCBhcyBfcmVuZGVyTGlzdCwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlRWxlbWVudEJsb2NrIGFzIF9jcmVhdGVFbGVtZW50QmxvY2ssIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBjcmVhdGVFbGVtZW50Vk5vZGUgYXMgX2NyZWF0ZUVsZW1lbnRWTm9kZSwgbm9ybWFsaXplQ2xhc3MgYXMgX25vcm1hbGl6ZUNsYXNzLCByZXNvbHZlQ29tcG9uZW50IGFzIF9yZXNvbHZlQ29tcG9uZW50LCB3aXRoQ3R4IGFzIF93aXRoQ3R4LCBjcmVhdGVWTm9kZSBhcyBfY3JlYXRlVk5vZGUsIHdpdGhNb2RpZmllcnMgYXMgX3dpdGhNb2RpZmllcnMsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgp2YXIgX3dpdGhTY29wZUlkID0gZnVuY3Rpb24gX3dpdGhTY29wZUlkKG4pIHsKICByZXR1cm4gX3B1c2hTY29wZUlkKCJkYXRhLXYtMTU5NjRhZGMiKSwgbiA9IG4oKSwgX3BvcFNjb3BlSWQoKSwgbjsKfTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAidGFsa0NvbnRlbnQiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAidGFsa1Nob3ciCn07CnZhciBfaG9pc3RlZF8zID0gewogIGNsYXNzOiAidGFsa0lucHV0Igp9OwpleHBvcnQgZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgewogIHZhciBfY29tcG9uZW50X2VsX2lucHV0ID0gX3Jlc29sdmVDb21wb25lbnQoImVsLWlucHV0Iik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8yLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVFbGVtZW50QmxvY2soX0ZyYWdtZW50LCBudWxsLCBfcmVuZGVyTGlzdCgkZGF0YS50YWxrTGlzdCwgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCB7CiAgICAgIGNsYXNzOiBfbm9ybWFsaXplQ2xhc3MoW2l0ZW0ucGVyc29uID09ICdtZWNoYW5pY2FsJyA/ICdtZWNoYW5pY2FsVGFsaycgOiAnbWluZVRhbGsnXSksCiAgICAgIGtleTogaW5kZXgKICAgIH0sIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJzcGFuIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyhpdGVtLnNheSksIDEKICAgIC8qIFRFWFQgKi8KICAgICldLCAyCiAgICAvKiBDTEFTUyAqLwogICAgKTsKICB9KSwgMTI4CiAgLyogS0VZRURfRlJBR01FTlQgKi8KICApKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZm9ybSIsIHsKICAgIG9uU3VibWl0OiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9IF93aXRoTW9kaWZpZXJzKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICRvcHRpb25zLmdldFF1ZXN0aW9uICYmICRvcHRpb25zLmdldFF1ZXN0aW9uLmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgfSwgWyJwcmV2ZW50Il0pKSwKICAgIGNsYXNzOiAidXNlclNlYXJjaCIKICB9LCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfZWxfaW5wdXQsIHsKICAgIHBsYWNlaG9sZGVyOiAi6K+36L6T5YWl5YaF5a65IiwKICAgIG1vZGVsVmFsdWU6ICRkYXRhLmNvbnRlbnRWYWwsCiAgICAib25VcGRhdGU6bW9kZWxWYWx1ZSI6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICByZXR1cm4gJGRhdGEuY29udGVudFZhbCA9ICRldmVudDsKICAgIH0pLAogICAgc2l6ZTogImJpZyIKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiaSIsIHsKICAgICAgICBzbG90OiAic3VmZml4IiwKICAgICAgICBjbGFzczogImVsLWlucHV0X19pY29uIGVsLWljb24tcG9zaXRpb24iLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAiY3Vyc29yIjogInBvaW50ZXIiCiAgICAgICAgfSwKICAgICAgICBvbkNsaWNrOiBfY2FjaGVbMF0gfHwgKF9jYWNoZVswXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiAkb3B0aW9ucy5nZXRRdWVzdGlvbiAmJiAkb3B0aW9ucy5nZXRRdWVzdGlvbi5hcHBseSgkb3B0aW9ucywgYXJndW1lbnRzKTsKICAgICAgICB9KQogICAgICB9KV07CiAgICB9KSwKICAgIF86IDEKICAgIC8qIFNUQUJMRSAqLwoKICB9LCA4CiAgLyogUFJPUFMgKi8KICAsIFsibW9kZWxWYWx1ZSJdKV0sIDMyCiAgLyogSFlEUkFURV9FVkVOVFMgKi8KICApXSldKTsKfQ=="},{"version":3,"sources":["D:\\Libr\\library\\library\\vue\\src\\views\\Chat.vue"],"names":[],"mappings":";;;;;;;AAEO,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;AAKN,EAAA,KAAK,EAAC;;;;;uBANb,mBAAA,CAgBM,KAhBN,EAAA,UAAA,EAgBM,CAfJ,mBAAA,CAIM,KAJN,EAAA,UAAA,EAIM,E,kBAHJ,mBAAA,CAEM,SAFN,EAEM,IAFN,EAEM,WAAA,CAFyF,KAAA,CAAA,QAEzF,EAFiG,UAAvB,IAAuB,EAAlB,KAAkB,EAAb;yBAA1F,mBAAA,CAEM,KAFN,EAEM;AAFA,MAAA,KAAK,EAAA,eAAA,CAAA,CAAI,IAAI,CAAC,MAAL,IAAW,YAAf,GAAe,gBAAf,GAAe,UAAf,CAAA,CAEL;AAFoG,MAAA,GAAG,EAAE;AAEzG,KAFN,E,CACE,mBAAA,CAAyB,MAAzB,EAAyB,IAAzB,EAAyB,gBAAA,CAAjB,IAAI,CAAC,GAAY,CAAzB,EAAgB;AAAA;AAAhB,K,CADF,E;;AAAA,K;GAEM,CAFN,E;;AAAA,GAGI,EAJN,CAeI,EAVJ,mBAAA,CASM,KATN,EAAA,UAAA,EASM,CARJ,mBAAA,CAOO,MAPP,EAOO;AAPA,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA;AAAA,aAAU,QAAA,CAAA,WAAA,IAAA,QAAA,CAAA,WAAA,OAAA,QAAA,YAAV;AAAA,KAAA,EAAqB,CAAA,SAAA,CAArB,CAAA,CAON;AAP6B,IAAA,KAAK,EAAC;AAOnC,GAPP,E,CACE,YAAA,CAKW,mBALX,EAKW;AAJP,IAAA,WAAW,EAAC,OAIL;gBAHE,KAAA,CAAA,UAGF;;aAHE,KAAA,CAAA,U,GAAU,M;MAGZ;AAFP,IAAA,IAAI,EAAC;AAEE,GALX,E;sBAIE;AAAA,aAA2G,CAA3G,mBAAA,CAA2G,GAA3G,EAA2G;AAAxG,QAAA,IAAI,EAAC,QAAmG;AAA1F,QAAA,KAAK,EAAC,iCAAoF;AAAlD,QAAA,KAAwB,EAAxB;AAAA,oBAAA;AAAA,SAAkD;AAAxB,QAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,iBAAE,QAAA,CAAA,WAAA,IAAA,QAAA,CAAA,WAAA,OAAA,QAAA,YAAF;AAAA,SAAA;AAAmB,OAA3G,CAA2G,CAA3G;AAAA,K;;;;GAJF,E;;AAAA,I,cAAA,C,CADF,E;;AAAA,GAQI,CATN,CAUI,CAhBN,C","sourcesContent":["\r\n<template>\r\n  <div class=\"talkContent\">\r\n    <div class=\"talkShow\">\r\n      <div :class=\"[(item.person=='mechanical')?'mechanicalTalk':'mineTalk']\" v-for=\"(item,index) in talkList\" :key=\"index\">\r\n        <span>{{item.say}}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"talkInput\">\r\n      <form @submit.prevent=\"getQuestion\" class=\"userSearch\">\r\n        <el-input\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"contentVal\"\r\n            size=\"big\">\r\n          <i slot=\"suffix\" class=\"el-input__icon el-icon-position\" style=\"cursor: pointer;\" @click=\"getQuestion\"></i>\r\n        </el-input>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"../utils/request\";\r\nimport {ElMessage} from \"element-plus\";\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      talkList: [\r\n        { id:\"1\", person: 'mechanical', say: '你好，我是图书馆AI小助手^_^,请问有什么可以帮到你呢？' },\r\n      ],\r\n      isMine: 1,\r\n      contentVal: '',\r\n    };\r\n  },\r\n  methods: {\r\n    getQuestion() {\r\n      if (this.contentVal == '') {\r\n        this.$message.error('请输入内容');\r\n        return;\r\n      }\r\n\r\n      // admin提问数据push()\r\n      this.talkList.push({ id: Date.now(), person:'admin', say: this.contentVal });\r\n      // 清空输入栏数据\r\n      let question=this.contentVal\r\n      this.contentVal = '';\r\n      this.getAnswer(question);\r\n    },\r\n    async getAnswer(question){\r\n      // 调用API获取回答， 模拟后端返回的数据流式输出\r\n      let data ='';\r\n\r\n      // mechanical 模拟回答\r\n      request.get(`/chat?question=${question}`).then((res) => {\r\n   ;\r\n        if(res.code==200){\r\n          data = ''+res.msg;\r\n          this.talkList.push({ id: Date.now(), person:'mechanical', say: '...' });\r\n          // 流式输出文字逐个展示\r\n          let text = \"\";\r\n          const length = this.talkList.length;\r\n          for (let i = 0; i < data.length; i++) {\r\n            text += data.charAt(i);\r\n             new Promise((resolve) => {\r\n              setTimeout(resolve, 100)\r\n            });\r\n            this.talkList[length - 1].say= text;\r\n          }\r\n        }else{\r\n          ElMessage.error(res.msg);\r\n        }\r\n      })\r\n\r\n\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.talkContent {\r\n  margin: 50px auto 0;\r\n  font-size: 14px;\r\n}\r\n\r\n.talkShow {\r\n  height: 400px;\r\n  margin: 10px auto 0;\r\n  overflow: auto;\r\n}\r\n\r\n.talkInput {\r\n  margin: 10px auto 0;\r\n  display:flex;\r\n  justify-content: left;\r\n  width: 200%;\r\n  border-color: white;\r\n  border-radius: 0;\r\n\r\n}\r\n\r\n.mechanicalTalk {\r\n  margin: 10px;\r\n}\r\n\r\n.mechanicalTalk span {\r\n  display: inline-block;\r\n  background: white;\r\n  border-radius: 10px;\r\n  padding: 5px 10px;\r\n  border: 1px solid rgb(214, 216, 219);\r\n  border-top-left-radius: 0px;\r\n  word-break: break-all;\r\n  text-align: left;\r\n}\r\n\r\n.mineTalk {\r\n  margin: 10px;\r\n  text-align: right;\r\n}\r\n\r\n.mineTalk span {\r\n  display: inline-block;\r\n  border-radius: 10px;\r\n  border-top-right-radius: 0px;\r\n  background: #409eff;\r\n  color: #fff;\r\n  padding: 5px 10px;\r\n  word-break: break-all;\r\n  text-align: left;\r\n}\r\n\r\n</style>\r\n\r\n"],"sourceRoot":""}]}